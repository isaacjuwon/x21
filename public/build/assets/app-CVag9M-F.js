function n(e,t){const s=Alpine.reactive(t);typeof s.init=="function"&&s.init(),Alpine.magic(e,()=>s),window[e[0].toUpperCase()+e.slice(1)]=s}document.addEventListener("alpine:init",()=>{n("theme",{currentTheme:null,storedTheme:null,init(){this.storedTheme=localStorage.getItem("theme")??"system",this.currentTheme=h(this.storedTheme),i(this.currentTheme),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{this.storedTheme==="system"&&(this.currentTheme=t.matches?"dark":"light",i(this.currentTheme))})},setTheme(e){this.storedTheme=e,localStorage.setItem("theme",e),this.currentTheme=h(e),i(this.currentTheme)},setLight(){this.setTheme("light")},setDark(){this.setTheme("dark")},setSystem(){this.setTheme("system")},toggle(){this.storedTheme==="system"?this.setTheme(this.currentTheme==="dark"?"light":"dark"):this.setTheme(this.storedTheme==="dark"?"light":"dark")},get(){return{stored:this.storedTheme,current:this.currentTheme,isLight:this.isLight,isDark:this.isDark,isSystem:this.isSystem}},get isLight(){return this.storedTheme==="light"},get isDark(){return this.storedTheme==="dark"},get isSystem(){return this.storedTheme==="system"},get isResolvedToLight(){return this.isSystem?r()==="light":this.isLight},get isResolvedToDark(){return this.isSystem?r()==="dark":this.isDark}})});function h(e){return e==="system"?r():e}function r(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function i(e){const t=document.documentElement;e==="dark"?t.classList.add("dark"):t.classList.remove("dark"),document.dispatchEvent(new CustomEvent("theme-changed",{detail:{theme:e}}))}document.addEventListener("alpine:init",()=>{n("modal",{openModals:new Set,open(e){this.openModals.has(e)||(this.openModals.add(e),window.dispatchEvent(new CustomEvent("open-modal",{detail:{id:e}})))},close(e){this.openModals.has(e)&&(this.openModals.delete(e),window.dispatchEvent(new CustomEvent("close-modal",{detail:{id:e}})))},closeAll(){this.openModals.forEach(e=>{this.close(e)})},getOpenedModals(){return Array.from(Alpine.raw(this.openModals))},isOpen(e){return this.openModals.has(e)}})});
